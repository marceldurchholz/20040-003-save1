define(["jquery","underscore","Backbone","text!views/templates/MessagedetailsView.html"],function(e,t,s){var i=s.View.extend({events:{"click a":global_a_clickHandler,"click button":global_button_clickHandler},initialize:function(t){_this=this,_this.options=t||new Object,e(_this.el).undelegate("a","click"),_this.options.streamData=_this.options.streamData||new Object,_this.options.query_vars=_this.options.query_vars||new Object,window.me=window.me||new Object,_this.options.query_vars.userid=_this.options.query_vars.userid||"",_this.options.query_vars.messageid=_this.options.query_vars.messageid||""},fetchData:function(t){var s=e.Deferred(),i=this;return i.options=t,void 0!=i.options.query_vars.messageid&&""!=i.options.query_vars.messageid?e.when(collectMessagedetailsArray(i.options.query_vars.messageid)).done(function(e){i.options.streamData.messagedetailsArray=e,s.resolve(i)}):s.resolve(i),s.promise()},parseData:function(){var s=e.Deferred();return _self=this,e.when(_self.fetchData(_self.options)).done(function(i){i.options.dynContent=t.template(i.options.sidemenuModel.get("dynContent"),{page_vars:i.options})||"",require([i.options.sidemenuModel.get("templateUrl")],function(r){try{var a=t.template(r,{page_vars:i.options}).replace("	","").replace(/\n|\r|\t/g,"");i.$el.html(a),e(i.$el).trigger("create"),s.resolve(i)}catch(n){require(["text!views/template/MessagedetailsView.html"],function(r){var a=t.template(r,{page_vars:i.options}).replace("	","").replace(/\n|\r|\t/g,"");i.$el.html(a),e(i.$el).trigger("create"),s.resolve(i)})}finally{}})}),s.promise()},render:function(){_this=this}});return i});